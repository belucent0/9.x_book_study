# 8.8 클러스터링 인덱스
- 비슷한 것들을 같이 검색한다는 것에서 착안
- InnoDB 에서만 지원
## 8.8.1 클러스터링 인덱스
- 프라이머리 키에 대해서만 적용되는 내용
- 실제 데이터 레코드의 위치 결정 -> 프라이머리 키가 변경되면 저장 위치도 변경됨
- InnoDB 제외한 테이블에서는 INSERT 시 저장 위치 결정되고 변경되지 않음
- 프라이머리 키가 없다면?
    - NOT NULL 유니크 인덱스 중에 첫 번째 인덱스로 클러스터링 키로 지정
    - 내부적으로 자동 증가 유니크 값을 가지는 칼럼을 추가하고 클러스터링 키로 지정
## 8.8.2 세컨더리 인덱스에 미치는 영향
- 다른 스토리지 엔진: 인덱스에 레코드의 주소를 저장
- InnoDB: 세컨더리 인덱스에 레코드의 프라이머리 키를 저장 -> 프라이머리 키 인덱스 검색해서 최종 레코드 가져옴
## 8.8.3 클러스터링 인덱스의 장점과 단점
- 장점 => SELECT
    - 검색 처리 성능이 매우 빠름
    - 커버링 인덱스만으로 처리될 수 있는 경우가 많음
- 단점 => INSERT, UPDATE, DELETE
    - 모든 세컨더리 인덱스가 클러스터링 키를 갖기 때문에 클러스터링 키 값의 크기가 클 수록 인덱스의 크기가 커짐    
    - 세컨더리 인덱스 -> 프라이머리 키로 검색하는 과정에서 처리 속도가 느림
    - INSERT 시 프라이머리 키에 의해 레코드의 저장 위치가 결정되므로 처리 성능 느림
    - 프라이머리 키 변경 시 레코드를 DELETE 후 INSERT 하므로 처리 성능 느림
## 8.8.4 클러스터링 테이블 사용 시 주의사항
### 8.8.4.1 클러스터링 인덱스 키의 크기
### 8.8.4.2 프라이머리 키는 AUTO-INCREMENT 보다는 업무적으로 칼럼으로 생성(가능한 경우)
### 8.8.4.3 프라이머리 키는 반드시 명시할 것
### 8.8.4.4 AUTO-INCREMENT 칼럼을 인조 식별자로 사용할 경우
- 세컨더리 인덱스도 필요하고 프라이머리 키의 길이도 긴 경우
    - 프라이머리 키를 AUTO-INCREMENT 로 지정 -> 인조 식별자
